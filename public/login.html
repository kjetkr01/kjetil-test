<!DOCTYPE html>
<html>

<head>
    <title>Login</title>

    <meta charset="utf-8" />

    <!-- manifest -->

    <link rel="manifest" href="manifest.json">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Treningsstatestikk">
    <meta name="apple-mobile-web-app-title" content="Treningsstatestikk">
    <meta name="msapplication-starturl" content="/">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" type="image/png" sizes="192x192" href="images/appIcon.png">
    <link rel="apple-touch-icon" type="image/png" sizes="192x192" href="images/appIcon.png">

    <!-- -->

    <script src="scripts/global.js" type="text/javascript"></script>
    <script src="scripts/validateInfo.js" type="text/javascript"></script>
    <script src="scripts/script.js" type="text/javascript"></script>

</head>

<body>

    <!-- -->

    <form id="loginForm">

        <input id="username" placeholder="Brukernavn" type="text" required="true">
        <input id="psw" placeholder="Passord" type="password" required="true">
        <input type="checkbox" id="rmbrMe">Husk meg

        <input type="submit" value="Logg inn">
    </form>

    <p id="loginMsg"></p>

    <!-- -->

</body>

<script>

    // login
    const loginForm = document.getElementById("loginForm");

    loginForm.addEventListener("submit", async function (evt) {

        evt.preventDefault();
        const rmbrMe = document.getElementById("rmbrMe").checked;

        const username = document.getElementById("username").value;
        const psw = document.getElementById("psw").value;

        const resp = await login(username, psw, rmbrMe);

        const loginMsg = document.getElementById("loginMsg");
        loginMsg.innerHTML = resp;

        if (resp === "Login successful") { redirectToHome(); }

    });

   //

</script>

</html>