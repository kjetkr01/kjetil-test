<!DOCTYPE html>
<html>

<head>
    <title>Login</title>

    <meta charset="utf-8" />

    <!-- manifest -->

    <link rel="manifest" href="manifest.json">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Treningsstatestikk">
    <meta name="apple-mobile-web-app-title" content="Treningsstatestikk">
    <meta name="msapplication-starturl" content="/">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" type="image/png" sizes="192x192" href="images/appIcon.png">
    <link rel="apple-touch-icon" type="image/png" sizes="192x192" href="images/appIcon.png">

    <!-- -->

    <link rel="stylesheet" href="styles/global.css">
    <link rel="stylesheet" href="styles/login.css">

    <script src="scripts/global.js" type="text/javascript"></script>
    <script src="scripts/validateInfo.js" type="text/javascript"></script>
    <script src="scripts/script.js" type="text/javascript"></script>

</head>

<body>


    <section id="loginPage">

        <!-- spacing items-->

        <div id="e1r1"></div>
        <div id="e2r1"></div>
        <div id="e3r1"></div>
        <div id="e4r1"></div>

        <!-- -->

        <!-- content items-->

        <div id="c1r1"></div>
        <div id="c2r1"></div>

        <div id="c1r2"></div>
        <div id="c2r2"></div>
        <div id="c3r2"></div>

        <div id="c1r3"></div>
        <div id="c2r3"></div>

        <!-- -->

        <!-- content/middle -->

        <div id="Glinks">
            <table id="links">

            </table>
        </div>

        <div id="logoG">
            <!--<img id="logo" draggable="false" src="images/logo.svg">-->
        </div>

        <div id="inp1G">
            <input id="inp1" type="text" placeholder="Brukernavn">
        </div>

        <div id="inp2G">
            <input id="inp2" type="password" placeholder="Passord">
        </div>

        <div id="rmbrmebtnG">
            <input id="rmbrMe" type="checkbox">
            <p id="rmbrMeTxt">Husk meg</p>
        </div>

        <div id="respmsgG">
            <p id="respmsg">
                <!-- response.data (resp) -->
            </p>
        </div>

        <div id="loginbtnG">
            <button id="loginbtn" onclick="loginUser()">
                Logg inn
            </button>
        </div>

        <div id="noaccbtnG">
            <p id="noaccbtn">
                Ingen konto? <strong>Be om tilgang</strong>
            </p>
        </div>

        <div id="Gfootermenu">
            <p id="footermenu">

            </p>
        </div>

        <!-- -->

    </section>



    <!--

    <form id="loginForm">

        <input id="username" placeholder="Brukernavn" type="text" required="true">
        <input id="psw" placeholder="Passord" type="password" required="true">
        <input type="checkbox" id="rmbrMe">Husk meg

        <input type="submit" value="Logg inn">
    </form>

    <p id="loginMsg"></p>

    -->

</body>

<script>

    addEventListener("keypress", function(evt){

        if(evt.keyCode === 13){
            loginUser();
        }

    });

    displayLinks("links");

    async function loginUser() {

        const rmbrMe = document.getElementById("rmbrMe").checked;

        const username = document.getElementById("inp1").value;
        const psw = document.getElementById("inp2").value;

        if (username && psw) {

            const resp = await login(username, psw, rmbrMe);

            if (resp === "Login successful") { redirectToHome(); }

            const respmsg = document.getElementById("respmsg");
            respmsg.innerHTML = resp;

        }

    };

</script>

</html>