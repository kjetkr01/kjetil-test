<!DOCTYPE html>
<html>

<head>
   <title>test side</title>

   <meta charset="utf-8" />

   <!-- manifest -->

   <link rel="manifest" href="manifest.json">

   <meta name="mobile-web-app-capable" content="yes">
   <meta name="apple-mobile-web-app-capable" content="yes">
   <meta name="application-name" content="Treningsstatistikk">
   <meta name="apple-mobile-web-app-title" content="Treningsstatistikk">
   <meta name="msapplication-starturl" content="/">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=0">

   <link rel="icon" type="image/png" sizes="192x192" href="images/appIcon.png">
   <link rel="apple-touch-icon" type="image/png" sizes="192x192" href="images/appIcon.png">

   <!-- -->

   <script src="scripts/global.js" type="text/javascript"></script>
   <script src="scripts/validateInfo.js" type="text/javascript"></script>
   <script src="scripts/script.js" type="text/javascript"></script>

</head>

<body>

   <div id="container">

      Info side:
      <br><br>
      <button onClick="location.reload()">Oppdater siden</button><br>
      <p>Sist oppdatert:</p>
      <p id="updateTime"></p>

      <p id="info"></p>

      Sider:
      <br><br>

      <button onClick="location.href = 'index.html'">index</button>
      <button onClick="location.href = 'login.html'">login</button>
      <button onClick="location.href = 'access.html'">access</button>

      <br><br>

      <p id="testmessage"></p>

      <button onClick="location.href = '/api'">/api</button>

      <p id="showLocalStorage"></p>
      <p id="showSessionStorage"></p>

   </div>

</body>

<script>

   let stopIntervalsTest = true; // stop auto update

   let autoUpdate = setInterval(() => {

      if (stopIntervalsTest) {
         clearInterval(autoUpdate);
         return;
      }

      let test1 = isGymOpen();
      let test2 = partOfDayMessage(userDisplayname);
      document.getElementById("testmessage").innerHTML = `
      ${test1.message}
      <br>
      ${test1.timeLeft}
      <br>
      ${test2}
      `;

   }, 1000);





   // til testing / ekstra ting

   updateTime();
   function updateTime() {
      document.getElementById("updateTime").innerHTML = lastUpdatedTime;

      const html = `
      Screensize:
      <br>
      availH: ${window.screen.availHeight} px<br>
      availW: ${window.screen.availWidth} px<br>

      innerH: ${window.innerHeight} px<br>
      innerW: ${window.innerWidth} px
      `;
      document.getElementById("info").innerHTML = html;
   }

   // show localstorage list

   showLocalStorageList();
   function showLocalStorageList() {

      let keys = Object.keys(localStorage);
      const showLocalStorage = document.getElementById("showLocalStorage");
      showLocalStorage.innerHTML = "";

      if (keys.length > 0) {
         showLocalStorage.innerHTML = "Localstorage items: <br><br>";
         for (let i = 0; i < keys.length; i++) {
            showLocalStorage.innerHTML += keys[i] + ": " + localStorage.getItem(keys[i]) + "<br>";
         }

         showLocalStorage.innerHTML += "<br> <button onClick='localStorage.clear()'>Clear localStorage</button>";

      }
   }

   //

   // show localstorage list

   showSessionStorageList();
   function showSessionStorageList() {

      let keys = Object.keys(sessionStorage);
      const showSessionStorage = document.getElementById("showSessionStorage");
      showSessionStorage.innerHTML = "";

      if (keys.length > 0) {
         showSessionStorage.innerHTML = "SessionStorage items: <br><br>";
         for (let i = 0; i < keys.length; i++) {
            showSessionStorage.innerHTML += keys[i] + ": " + sessionStorage.getItem(keys[i]) + "<br>";
         }

         showSessionStorage.innerHTML += "<br> <button onClick='sessionStorage.clear()'>Clear sessionStorage</button>";

      }
   }

   //

</script>

</html>