<!DOCTYPE html>
<html>

<head>
   <title>test side</title>

   <!--
<meta name="viewport" content="initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="manifest" href="/manifest.json">

-->

   <link rel="manifest" href="manifest.json">

   <meta name="mobile-web-app-capable" content="yes">
   <meta name="apple-mobile-web-app-capable" content="yes">
   <meta name="application-name" content="Kjetil - Test">
   <meta name="apple-mobile-web-app-title" content="Kjetil - Test">
   <meta name="msapplication-starturl" content="/index.html">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   <link rel="icon" type="image/png" sizes="192x192" href="images/appIcon.png">
   <link rel="apple-touch-icon" type="image/png" sizes="192x192" href="images/appIcon.png">

   <meta charset="utf-8" />

   <script src="scripts/global.js" type="text/javascript"></script>
   <script src="scripts/validateInfo.js" type="text/javascript"></script>
   <script src="scripts/script.js" type="text/javascript"></script>
   <script src="scripts/intervals.js" type="text/javascript"></script>

</head>

<body>

   <div id="container">

      Info side:
      <br><br>
      <button onClick="location.reload()">Oppdater siden</button><br>
      <p>Sist oppdatert:</p>
      <p id="updateTime"></p>

      <p id="info"></p>

      Sider:
      <br><br>

      <button onClick="location.href = 'index.html'">index</button>
      <button onClick="location.href = 'login.html'">login</button>
      <button onClick="location.href = 'access.html'">access</button>

      <br><br>

      <button onClick="loadPage('index')">index (ajax)</button>
      <button onClick="loadPage('login')">login (ajax)</button>
      <button onClick="loadPage('access')">access (ajax)</button>
      <br>
      <p id="testmessage"></p>

      <form id="askForAccess">

         <input id="displayname" placeholder="displayname" type="text" value="Kjetil Kristiansen">
         <input id="username" placeholder="username" type="text" value="kjetkr01">
         <input id="psw" placeholder="password" type="password" value="123">
         <input id="confirmPsw" placeholder="confirm password" type="password" value="123">

         <input type="submit">
      </form>

   </div>

</body>

<script>

   // ask for access
   const askForAccess = document.getElementById("askForAccess");

   askForAccess.addEventListener("submit", async function (evt) {

      evt.preventDefault();

      const displayname = document.getElementById("displayname").value;
      const username = document.getElementById("username").value;
      const psw = document.getElementById("psw").value;
      const confirmPsw = document.getElementById("confirmPsw").value;

      let resp = await validate(displayname, username, psw, confirmPsw);
      console.log(resp)

   });

   //

   //let test = validate("Kjetil Kristiansen", "kjetkr01", "123", "123");
   let names = ["Kjetil", "Simonso", "Kristian", "Christian", "Trym"];
   let randomNum = Math.floor(Math.random() * names.length);


   let stopIntervalsTest = false;

   let autoUpdate = setInterval(() => {

      if (stopIntervalsTest) {
         clearInterval(autoUpdate);
         return;
      }

      let test1 = isGymOpen();
      let test2 = partOfDayMessage(names[randomNum]);
      document.getElementById("testmessage").innerHTML = `
      ${test1.message}
      <br>
      ${test1.timeLeft}
      <br>
      ${test2}
      `;

   }, 1000);

   let program = { "Mandag": "Bein og mage", "Tirsdag": "Rygg og biceps" };

   let resp = whatToTrainToday(program)
   console.log(resp)

   // til testing

   updateTime()

   function updateTime() {
      let d = new Date();
      document.getElementById("updateTime").innerHTML = d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

      const html = `
      Screensize:
      <br>
      H: ${window.screen.availHeight} px<br>
      W: ${window.screen.availWidth} px
      `;
      document.getElementById("info").innerHTML = html;
   }

</script>

</html>