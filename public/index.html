<!DOCTYPE html>
<html>

<head>
    <title>Hjem</title>

    <meta charset="utf-8" />

    <!-- manifest -->

    <link rel="manifest" href="manifest.json">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Treningsstatestikk">
    <meta name="apple-mobile-web-app-title" content="Treningsstatestikk">
    <meta name="msapplication-starturl" content="/">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" type="image/png" sizes="192x192" href="images/appIcon.png">
    <link rel="apple-touch-icon" type="image/png" sizes="192x192" href="images/appIcon.png">

    <!-- -->

    <link rel="stylesheet" href="styles/global.css">
    <link rel="stylesheet" href="styles/index.css">

    <script src="scripts/global.js" type="text/javascript"></script>
    <script src="scripts/validateInfo.js" type="text/javascript"></script>
    <script src="scripts/script.js" type="text/javascript"></script>

</head>


<body>

    <header>

        <nav>
            <ul class="nav_links">
                <li><a href="index.html">Hjem</a></li>
                <li><a href="access.html">Lag konto</a></li>
                <li><a href="login.html">Logg inn</a></li>
            </ul>
        </nav>

    </header>


    <article>

        <div id="container">

            <div id="hei_melding"></div>
            <div id="whatToTrainToday"></div>
            <div id="gym_open"></div>
            <div id="time_left"></div>

            <table id="board"></table>
        </div>

    </article>


    <footer>
        Laget av Kjetkr01 og Simonso
    </footer>

</body>

<script>

    const gymopen = isGymOpen();
    if (gymopen) {
        document.getElementById("gym_open").innerHTML = gymopen.message
        document.getElementById("time_left").innerHTML = gymopen.timeLeft
    }

    const partofdaymsg = partOfDayMessage(userDisplayname);
    if (partofdaymsg) {
        document.getElementById("hei_melding").innerHTML = partofdaymsg
    }

    checkTrainingSplit();
    async function checkTrainingSplit() {

        const resp = await whatToTrainToday();

        if (resp.length > 0) {
            document.getElementById("whatToTrainToday").innerHTML = resp;
        }

    }

    checkWhoIsWorkingOutToday();
    async function checkWhoIsWorkingOutToday() {

        const board = document.getElementById("board");
        const resp = await whoIsWorkingOutToday();

        if (resp) {
            board.innerHTML = `
        <tr>
        <th>Navn</th>
        <th>Trener</th>
        </tr>`;

            for (let i = 0; i < Object.entries(resp).length; i++) {
                board.innerHTML += `
        <tr>
        <td>${resp[i].userFullName}</td>
        <td>${resp[i].todaysWorkout}</td>
        </tr>`;
            }
        }

    }

</script>

</html>